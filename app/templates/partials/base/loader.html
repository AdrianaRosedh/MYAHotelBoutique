{% block loader_styles %}
<style>
    body.loading {
        margin: 0;
        overflow: hidden;
    }
    .page-loader {
        width: 100%;
        height: 100vh;
        position: fixed;
        background: rgb(168, 162, 158);
        z-index: 1000;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: opacity 0.5s ease; /* Smooth transition */
    }
    .page-loader.hidden {
        opacity: 0;
        pointer-events: none; /* Prevent interaction when hidden */
    }
    .grape-loader {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .grape-row {
        display: flex;
        justify-content: center;
        margin-bottom: 10px;
    }
    .grape-dot {
        width: 50px;
        height: 50px;
        background-color: #4d0754 !important;
        border-radius: 50%;
        margin: 10px;
        animation: ball-pulse-sync 2s infinite ease-in-out;
    }
    .grape-stem {
        width: 7px;
        height: 15px;
        background-color: #0d650d !important;
        margin: 5px;
        border-radius: 5px;
        transform: rotate(20deg);
        animation: ball-pulse-sync 2s infinite ease-in-out;
    }
    @keyframes ball-pulse-sync {
        33% {
            transform: translateY(10px);
        }
        66% {
            transform: translateY(-10px);
        }
        100% {
            transform: translateY(0);
        }
    }
    #content {
        display: none; /* Hidden initially */
    }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/loaders.css/0.1.2/loaders.min.css">
{% endblock %}

<div class="page-loader" id="loader">
    <div class="grape-loader">
        <div class="grape-row">
            <div class="grape-stem"></div>
        </div>
        <div class="grape-row ball-pulse-sync">
            <div class="grape-dot"></div>
            <div class="grape-dot"></div>
            <div class="grape-dot"></div>
            <div class="grape-dot"></div>
        </div>
        <div class="grape-row ball-pulse-sync">
            <div class="grape-dot"></div>
            <div class="grape-dot"></div>
            <div class="grape-dot"></div>
        </div>
        <div class="grape-row ball-pulse-sync">
            <div class="grape-dot"></div>
            <div class="grape-dot"></div>
        </div>
        <div class="grape-row ball-pulse-sync">
            <div class="grape-dot"></div>
        </div>
    </div>
</div>

{% block loader_scripts %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        console.log("DOMContentLoaded event fired");  // Debug message

        // Function to show content and hide loader
        function showContent() {
            document.body.classList.remove('loading');
            var loader = document.getElementById('loader');
            loader.classList.add('hidden');
            loader.addEventListener('transitionend', function() {
                document.getElementById('content').style.display = 'block';
                console.log("Displayed the content element");  // Debug message
            });
        }

        // Show content immediately if hash is present
        if (window.location.hash) {
            document.body.classList.remove('loading');
            var loader = document.getElementById('loader');
            loader.classList.add('hidden');
            document.getElementById('content').style.display = 'block';
            console.log("Displayed the content element with hash");
        } else {
            window.addEventListener('load', function() {
                showContent();
            });
        }
    });
</script>
{% endblock %}
