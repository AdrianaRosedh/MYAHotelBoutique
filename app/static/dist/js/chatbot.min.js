function initChatbot(){document.getElementById("chatbot-toggle").addEventListener("click",toggleChatbot),document.getElementById("user-input").addEventListener("keypress",(function(e){"Enter"===e.key&&sendMessage(e)}));const e=document.querySelector(".send-button");e.addEventListener("click",sendMessage),e.addEventListener("touchstart",sendMessage),window.addEventListener("resize",handleResize),handleResize()}function toggleChatbot(){if(window.innerWidth<=640)openChatbotMobile();else{document.getElementById("chatbot-container").classList.contains("hidden")?openChatbot():closeChatbot()}}function openChatbot(){document.getElementById("chatbot-container").classList.remove("hidden"),document.body.classList.add("chatbot-open"),document.getElementById("user-input").focus();const e=document.getElementById("chatbox"),t=document.body.getAttribute("data-lang")||"en";if(localStorage.getItem("initialMessagesShown"))e.innerHTML=localStorage.getItem("chatHistoryDesktop")||"";else{let o;o="es"===t?["Â¡Hola! ðŸŒŸ","Â¿Tienes preguntas sobre MYA, Olivea o DiVino?","Â¡PregÃºntame, estoy aquÃ­ para ayudarte!"]:["Hey there! ðŸŒŸ","Got questions about MYA, Olivea, or DiVino?","Ask away, I'm here to help!"],showInitialMessages(e,o,"chatHistoryDesktop"),localStorage.setItem("initialMessagesShown","true")}}function closeChatbot(){document.getElementById("chatbot-container").classList.add("hidden"),document.body.classList.remove("chatbot-open"),document.getElementById("chatbot-toggle").focus()}function openChatbotMobile(){const e=document.body.getAttribute("data-lang")||"en";Swal.fire({title:"Chatbot",html:'\n            <div id="chatbot-container-swal" class="flex flex-col w-full h-full">\n                <div id="chatbot-header-swal" class="p-4 flex justify-between items-center">\n                    <img src="/static/dist/img/svg/mya-ai-bounce.svg" alt="Avatar" class="w-16 h-16">\n                    <button id="close-chatbot-swal" class="text-white" aria-label="Close Chatbot">&times;</button>\n                </div>\n                <div id="chatbox-swal" class="flex-1 p-4 overflow-auto"></div>\n                <div class="input-area-swal p-2 flex items-center">\n                    <input type="text" id="user-input-swal" class="p-2 flex-grow focus:outline-none">\n                    <button id="send-button-swal" class="send-button-swal" aria-label="Send message">\n                        <img src="/static/dist/img/svg/sending.svg" alt="Sending">\n                    </button>\n                </div>\n            </div>\n        ',showCloseButton:!1,showConfirmButton:!1,customClass:{popup:"chatbot-swal-popup"},width:"24rem",heightAuto:!1,padding:"0",background:"#fff",backdrop:!0,allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{console.log("Modal opened");const t=document.getElementById("chatbox-swal");if(localStorage.getItem("initialMessagesShownMobile"))t.innerHTML=localStorage.getItem("chatHistoryMobile")||"";else{let o;o="es"===e?["Â¡Hola! ðŸŒŸ","Â¿Tienes preguntas sobre MYA, Olivea o DiVino?","Â¡PregÃºntame, estoy aquÃ­ para ayudarte!"]:["Hey there! ðŸŒŸ","Got questions about MYA, Olivea, or DiVino?","Ask away, I'm here to help!"],showInitialMessages(t,o,"chatHistoryMobile"),localStorage.setItem("initialMessagesShownMobile","true")}document.getElementById("close-chatbot-swal").addEventListener("click",(()=>Swal.close()));document.getElementById("user-input-swal").addEventListener("keypress",(e=>{"Enter"===e.key&&sendMessageSwal(e)}));const o=document.getElementById("send-button-swal");o.addEventListener("click",sendMessageSwal),o.addEventListener("touchstart",sendMessageSwal),console.log("Event listeners attached for Swal modal")}})}async function sendMessageSwal(e){e.preventDefault(),console.log("sendMessageSwal triggered");const t=document.getElementById("user-input-swal"),o=t.value;if(""===o.trim())return;console.log("Sending message:",o);const n=document.getElementById("chatbox-swal");n.innerHTML+=`<div class="text-left chatbot-message"><strong>You:</strong> ${o}</div>`,t.value="";try{const e=await fetch("/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o})}),t=await e.json();n.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${t.response}</div>`,n.scrollTop=n.scrollHeight,localStorage.setItem("chatHistoryMobile",n.innerHTML)}catch(e){console.error("Error sending message:",e)}}async function sendMessage(e){e.preventDefault(),console.log("sendMessage triggered");const t=document.getElementById("user-input"),o=t.value;if(""===o.trim())return;console.log("Sending message:",o);const n=document.getElementById("chatbox");n.innerHTML+=`<div class="text-left chatbot-message"><strong>You:</strong> ${o}</div>`,t.value="";try{const e=await fetch("/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o})}),t=await e.json();n.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${t.response}</div>`,n.scrollTop=n.scrollHeight,localStorage.setItem("chatHistoryDesktop",n.innerHTML)}catch(e){console.error("Error sending message:",e)}}function showInitialMessages(e,t,o){e.innerHTML="";let n=0;t.forEach(((t,s)=>{setTimeout((()=>{e.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${t}</div>`,e.scrollTop=e.scrollHeight,localStorage.setItem(o,e.innerHTML)}),n),n+=1e3}))}function handleResize(){const e=document.getElementById("chatbot-container");window.innerWidth<=640?(e.style.width="100%",e.style.height="auto",e.style.bottom="0",e.style.right="0",e.style.left="0",e.style.maxHeight="100%",e.style.borderRadius="0"):(e.style.width="20rem",e.style.height="auto",e.style.bottom="1rem",e.style.right="1rem",e.style.left="auto",e.style.maxHeight="24rem",e.style.borderRadius="0.5rem")}document.addEventListener("DOMContentLoaded",(function(){initChatbot()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("close-chatbot");e&&e.addEventListener("click",closeChatbot)}));export function feature1(){console.log("Feature 1 initialized")}export function feature2(){console.log("Feature 2 initialized")}
//# sourceMappingURL=chatbot.min.js.map
