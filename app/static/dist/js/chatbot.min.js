document.addEventListener("DOMContentLoaded",(function(){initChatbot(),setupCloseButton(),feature1(),feature2()}));export function feature1(){}export function feature2(){}function initChatbot(){const e=document.getElementById("chatbot-toggle"),t=document.getElementById("user-input"),o=document.querySelector(".send-button");e?e.addEventListener("click",toggleChatbot):console.error("Chatbot toggle button not found"),t?t.addEventListener("keypress",(function(e){"Enter"===e.key&&sendMessage(e)})):console.error("User input field not found"),o?(o.addEventListener("click",sendMessage),o.addEventListener("touchstart",sendMessage)):console.error("Send button not found"),window.addEventListener("resize",handleResize),handleResize()}function setupCloseButton(){const e=document.getElementById("close-chatbot");e?e.addEventListener("click",closeChatbot):console.error("Close button not found")}function toggleChatbot(){if(window.innerWidth<=640)openChatbotMobile();else{const e=document.getElementById("chatbot-container");e&&e.classList.contains("hidden")?openChatbot():e?closeChatbot():console.error("Chatbot container not found")}}function openChatbot(){const e=document.getElementById("chatbot-container");if(e){e.classList.remove("hidden"),document.body.classList.add("chatbot-open"),document.getElementById("user-input").focus();const t=document.getElementById("chatbox"),o=document.body.getAttribute("data-lang")||"en";if(localStorage.getItem("initialMessagesShown"))t.innerHTML=localStorage.getItem("chatHistoryDesktop")||"";else{let e;e="es"===o?["Â¡Hola! ðŸŒŸ","Â¿Tienes preguntas sobre MYA, Olivea o DiVino?","Â¡PregÃºntame, estoy aquÃ­ para ayudarte!"]:["Hey there! ðŸŒŸ","Got questions about MYA, Olivea, or DiVino?","Ask away, I'm here to help!"],showInitialMessages(t,e,"chatHistoryDesktop"),localStorage.setItem("initialMessagesShown","true")}}else console.error("Chatbot container not found")}function closeChatbot(){const e=document.getElementById("chatbot-container");e?(e.classList.add("hidden"),document.body.classList.remove("chatbot-open"),document.getElementById("chatbot-toggle").focus()):console.error("Chatbot container not found")}function openChatbotMobile(){const e=document.body.getAttribute("data-lang")||"en";Swal.fire({title:"Chatbot",html:'\n            <div id="chatbot-container-swal" class="flex flex-col w-full h-full">\n                <div id="chatbot-header-swal" class="p-4 flex justify-between items-center">\n                    <img src="/static/dist/img/svg/mya-ai-bounce.svg" alt="Avatar" class="w-16 h-16">\n                    <button id="close-chatbot-swal" class="text-white" aria-label="Close Chatbot">&times;</button>\n                </div>\n                <div id="chatbox-swal" class="flex-1 p-4 overflow-auto"></div>\n                <div class="input-area-swal p-2 flex items-center">\n                    <input type="text" id="user-input-swal" class="p-2 flex-grow focus:outline-none">\n                    <button id="send-button-swal" class="send-button-swal" aria-label="Send message">\n                        <img src="/static/dist/img/svg/sending.svg" alt="Sending">\n                    </button>\n                </div>\n            </div>\n        ',showCloseButton:!1,showConfirmButton:!1,customClass:{popup:"chatbot-swal-popup"},width:"24rem",heightAuto:!1,padding:"0",background:"#fff",backdrop:!0,allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{const t=document.getElementById("chatbox-swal");if(localStorage.getItem("initialMessagesShownMobile"))t.innerHTML=localStorage.getItem("chatHistoryMobile")||"";else{let o;o="es"===e?["Â¡Hola! ðŸŒŸ","Â¿Tienes preguntas sobre MYA, Olivea o DiVino?","Â¡PregÃºntame, estoy aquÃ­ para ayudarte!"]:["Hey there! ðŸŒŸ","Got questions about MYA, Olivea, or DiVino?","Ask away, I'm here to help!"],showInitialMessages(t,o,"chatHistoryMobile"),localStorage.setItem("initialMessagesShownMobile","true")}const o=document.getElementById("close-chatbot-swal");o?o.addEventListener("click",(()=>Swal.close())):console.error("Close button for Swal modal not found");const n=document.getElementById("user-input-swal");n?n.addEventListener("keypress",(e=>{"Enter"===e.key&&sendMessageSwal(e)})):console.error("User input for Swal modal not found");const s=document.getElementById("send-button-swal");s?(s.addEventListener("click",sendMessageSwal),s.addEventListener("touchstart",sendMessageSwal)):console.error("Send button for Swal modal not found")}})}async function sendMessageSwal(e){e.preventDefault();const t=document.getElementById("user-input-swal"),o=t.value;if(""===o.trim())return;const n=document.getElementById("chatbox-swal");n.innerHTML+=`<div class="text-left chatbot-message"><strong>You:</strong> ${o}</div>`,t.value="";try{const e=await fetch("/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o})}),t=await e.json();n.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${t.response}</div>`,n.scrollTop=n.scrollHeight,localStorage.setItem("chatHistoryMobile",n.innerHTML)}catch(e){console.error("Error sending message:",e)}}async function sendMessage(e){e.preventDefault();const t=document.getElementById("user-input"),o=t.value;if(""===o.trim())return;const n=document.getElementById("chatbox");n.innerHTML+=`<div class="text-left chatbot-message"><strong>You:</strong> ${o}</div>`,t.value="";try{const e=await fetch("/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o})}),t=await e.json();n.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${t.response}</div>`,n.scrollTop=n.scrollHeight,localStorage.setItem("chatHistoryDesktop",n.innerHTML)}catch(e){console.error("Error sending message:",e)}}function showInitialMessages(e,t,o){e.innerHTML="";let n=0;t.forEach((t=>{setTimeout((()=>{e.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${t}</div>`,e.scrollTop=e.scrollHeight,localStorage.setItem(o,e.innerHTML)}),n),n+=1e3}))}function handleResize(){const e=document.getElementById("chatbot-container");e?window.innerWidth<=640?(e.style.width="100%",e.style.height="auto",e.style.bottom="0",e.style.right="0",e.style.left="0",e.style.maxHeight="100%",e.style.borderRadius="0"):(e.style.width="20rem",e.style.height="auto",e.style.bottom="1rem",e.style.right="1rem",e.style.left="auto",e.style.maxHeight="24rem",e.style.borderRadius="0.5rem"):console.error("Chatbot container not found during resize")}
//# sourceMappingURL=chatbot.min.js.map
