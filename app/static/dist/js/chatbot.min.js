function initChatbot(){document.getElementById("chatbot-toggle").addEventListener("click",toggleChatbot),document.getElementById("user-input").addEventListener("keypress",function(e){"Enter"===e.key&&sendMessage(e)}),document.querySelector(".send-button").addEventListener("click",sendMessage),document.querySelector(".send-button").addEventListener("touchstart",sendMessage),window.addEventListener("resize",handleResize),handleResize()}function toggleChatbot(){(window.innerWidth<=640?openChatbotMobile:document.getElementById("chatbot-container").classList.contains("hidden")?openChatbot:closeChatbot)()}function openChatbot(){document.getElementById("chatbot-container").classList.remove("hidden"),document.body.classList.add("chatbot-open"),document.getElementById("user-input").focus();var t=document.getElementById("chatbox"),o=document.body.getAttribute("data-lang")||"en";if(localStorage.getItem("initialMessagesShown"))t.innerHTML=localStorage.getItem("chatHistoryDesktop")||"";else{let e;showInitialMessages(t,e="es"===o?["Â¡Hola! ðŸŒŸ","Â¿Tienes preguntas sobre MYA, Olivea o DiVino?","Â¡PregÃºntame, estoy aquÃ­ para ayudarte!"]:["Hey there! ðŸŒŸ","Got questions about MYA, Olivea, or DiVino?","Ask away, I'm here to help!"],"chatHistoryDesktop"),localStorage.setItem("initialMessagesShown","true")}}function closeChatbot(){document.getElementById("chatbot-container").classList.add("hidden"),document.body.classList.remove("chatbot-open"),document.getElementById("chatbot-toggle").focus()}function openChatbotMobile(){let o=document.body.getAttribute("data-lang")||"en";Swal.fire({title:"Chatbot",html:`
            <div id="chatbot-container-swal" class="flex flex-col w-full h-full">
                <div id="chatbot-header-swal" class="p-4 flex justify-between items-center">
                    <img src="/static/dist/img/svg/mya-ai-bounce.svg" alt="Avatar" class="w-16 h-16">
                    <button id="close-chatbot-swal" class="text-white" aria-label="Close Chatbot">&times;</button>
                </div>
                <div id="chatbox-swal" class="flex-1 p-4 overflow-auto"></div>
                <div class="input-area-swal p-2 flex items-center">
                    <input type="text" id="user-input-swal" class="p-2 flex-grow focus:outline-none">
                    <button id="send-button-swal" class="send-button-swal" aria-label="Send message">
                        <img src="/static/dist/img/svg/sending.svg" alt="Sending">
                    </button>
                </div>
            </div>
        `,showCloseButton:!1,showConfirmButton:!1,customClass:{popup:"chatbot-swal-popup"},width:"24rem",heightAuto:!1,padding:"0",background:"#fff",backdrop:!0,allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{console.log("Modal opened");var t=document.getElementById("chatbox-swal");if(localStorage.getItem("initialMessagesShownMobile"))t.innerHTML=localStorage.getItem("chatHistoryMobile")||"";else{let e;showInitialMessages(t,e="es"===o?["Â¡Hola! ðŸŒŸ","Â¿Tienes preguntas sobre MYA, Olivea o DiVino?","Â¡PregÃºntame, estoy aquÃ­ para ayudarte!"]:["Hey there! ðŸŒŸ","Got questions about MYA, Olivea, or DiVino?","Ask away, I'm here to help!"],"chatHistoryMobile"),localStorage.setItem("initialMessagesShownMobile","true")}document.getElementById("close-chatbot-swal").addEventListener("click",()=>Swal.close());document.getElementById("user-input-swal").addEventListener("keypress",e=>{"Enter"===e.key&&sendMessageSwal(e)});t=document.getElementById("send-button-swal");t.addEventListener("click",sendMessageSwal),t.addEventListener("touchstart",sendMessageSwal),console.log("Event listeners attached")}})}async function sendMessageSwal(e){e.preventDefault();var e=document.getElementById("user-input-swal"),t=e.value;if(""!==t.trim()){console.log("Sending message:",t);var o=document.getElementById("chatbox-swal");o.innerHTML+=`<div class="text-left chatbot-message"><strong>You:</strong> ${t}</div>`,e.value="";try{var s=await(await fetch("/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})})).json();o.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${s.response}</div>`,o.scrollTop=o.scrollHeight,localStorage.setItem("chatHistoryMobile",o.innerHTML)}catch(e){console.error("Error sending message:",e)}}}async function sendMessage(e){e.preventDefault();var e=document.getElementById("user-input"),t=e.value;if(""!==t.trim()){var o=document.getElementById("chatbox");o.innerHTML+=`<div class="text-left chatbot-message"><strong>You:</strong> ${t}</div>`,e.value="";try{var s=await(await fetch("/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})})).json();o.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${s.response}</div>`,o.scrollTop=o.scrollHeight,localStorage.setItem("chatHistoryDesktop",o.innerHTML)}catch(e){console.error("Error sending message:",e)}}}function showInitialMessages(o,e,s){o.innerHTML="";let n=0;e.forEach((e,t)=>{setTimeout(()=>{o.innerHTML+=`<div class="text-left chatbot-message"><strong>Bot:</strong> ${e}</div>`,o.scrollTop=o.scrollHeight,localStorage.setItem(s,o.innerHTML)},n),n+=1e3})}function handleResize(){var e=document.getElementById("chatbot-container");window.innerWidth<=640?(e.style.width="100%",e.style.height="auto",e.style.bottom="0",e.style.right="0",e.style.left="0",e.style.maxHeight="100%",e.style.borderRadius="0"):(e.style.width="20rem",e.style.height="auto",e.style.bottom="1rem",e.style.right="1rem",e.style.left="auto",e.style.maxHeight="24rem",e.style.borderRadius="0.5rem")}function feature1(){console.log("Feature 1 initialized")}function feature2(){console.log("Feature 2 initialized")}document.addEventListener("DOMContentLoaded",function(){initChatbot()}),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("close-chatbot");e&&e.addEventListener("click",closeChatbot)});export{feature1,feature2};
//# sourceMappingURL=chatbot.min.js.map
