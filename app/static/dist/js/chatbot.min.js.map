{"version":3,"sources":["chatbot.js","feature1.js","feature2.js"],"names":["initChatbot","document","getElementById","addEventListener","toggleChatbot","event","key","sendMessage","sendButton","querySelector","window","handleResize","innerWidth","openChatbotMobile","classList","contains","openChatbot","closeChatbot","remove","body","add","focus","chatbox","lang","getAttribute","localStorage","getItem","innerHTML","messages","showInitialMessages","setItem","Swal","fire","title","html","showCloseButton","showConfirmButton","customClass","popup","width","heightAuto","padding","background","backdrop","allowOutsideClick","allowEscapeKey","didOpen","console","log","close","sendMessageSwal","async","preventDefault","userInput","userInputValue","value","trim","response","fetch","method","headers","JSON","stringify","message","data","json","scrollTop","scrollHeight","error","historyKey","delay","forEach","index","setTimeout","chatbotContainer","style","height","bottom","right","left","maxHeight","borderRadius","closeButton","feature1","feature2"],"mappings":"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","file":"chatbot.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    initChatbot();\n});\n\nfunction initChatbot() {\n    document.getElementById('chatbot-toggle').addEventListener('click', toggleChatbot);\n    document.getElementById('user-input').addEventListener('keypress', function(event) {\n        if (event.key === 'Enter') {\n            sendMessage(event);\n        }\n    });\n    const sendButton = document.querySelector('.send-button');\n    sendButton.addEventListener('click', sendMessage);\n    sendButton.addEventListener('touchstart', sendMessage);\n\n    window.addEventListener('resize', handleResize);\n    handleResize(); // Ensure proper styling on load\n}\n\nfunction toggleChatbot() {\n    if (window.innerWidth <= 640) {\n        openChatbotMobile();\n    } else {\n        const chatbotContainer = document.getElementById('chatbot-container');\n        if (chatbotContainer.classList.contains('hidden')) {\n            openChatbot();\n        } else {\n            closeChatbot();\n        }\n    }\n}\n\nfunction openChatbot() {\n    const chatbotContainer = document.getElementById('chatbot-container');\n    chatbotContainer.classList.remove('hidden');\n    document.body.classList.add('chatbot-open');\n    document.getElementById('user-input').focus();\n\n    const chatbox = document.getElementById('chatbox');\n    const lang = document.body.getAttribute('data-lang') || 'en';\n\n    if (!localStorage.getItem('initialMessagesShown')) {\n        let messages;\n        if (lang === 'es') {\n            messages = [\n                \"Â¡Hola! ðŸŒŸ\",\n                \"Â¿Tienes preguntas sobre MYA, Olivea o DiVino?\",\n                \"Â¡PregÃºntame, estoy aquÃ­ para ayudarte!\"\n            ];\n        } else {\n            messages = [\n                \"Hey there! ðŸŒŸ\",\n                \"Got questions about MYA, Olivea, or DiVino?\",\n                \"Ask away, I'm here to help!\"\n            ];\n        }\n        showInitialMessages(chatbox, messages, 'chatHistoryDesktop');\n        localStorage.setItem('initialMessagesShown', 'true');\n    } else {\n        chatbox.innerHTML = localStorage.getItem('chatHistoryDesktop') || '';\n    }\n}\n\nfunction closeChatbot() {\n    const chatbotContainer = document.getElementById('chatbot-container');\n    chatbotContainer.classList.add('hidden');\n    document.body.classList.remove('chatbot-open');\n    document.getElementById('chatbot-toggle').focus();\n}\n\nfunction openChatbotMobile() {\n    const lang = document.body.getAttribute('data-lang') || 'en';\n    Swal.fire({\n        title: 'Chatbot',\n        html: `\n            <div id=\"chatbot-container-swal\" class=\"flex flex-col w-full h-full\">\n                <div id=\"chatbot-header-swal\" class=\"p-4 flex justify-between items-center\">\n                    <img src=\"/static/dist/img/svg/mya-ai-bounce.svg\" alt=\"Avatar\" class=\"w-16 h-16\">\n                    <button id=\"close-chatbot-swal\" class=\"text-white\" aria-label=\"Close Chatbot\">&times;</button>\n                </div>\n                <div id=\"chatbox-swal\" class=\"flex-1 p-4 overflow-auto\"></div>\n                <div class=\"input-area-swal p-2 flex items-center\">\n                    <input type=\"text\" id=\"user-input-swal\" class=\"p-2 flex-grow focus:outline-none\">\n                    <button id=\"send-button-swal\" class=\"send-button-swal\" aria-label=\"Send message\">\n                        <img src=\"/static/dist/img/svg/sending.svg\" alt=\"Sending\">\n                    </button>\n                </div>\n            </div>\n        `,\n        showCloseButton: false,\n        showConfirmButton: false,\n        customClass: {\n            popup: 'chatbot-swal-popup'\n        },\n        width: '24rem',\n        heightAuto: false,\n        padding: '0',\n        background: '#fff',\n        backdrop: true,\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        didOpen: () => {\n            console.log(\"Modal opened\");\n\n            const chatbox = document.getElementById('chatbox-swal');\n            if (!localStorage.getItem('initialMessagesShownMobile')) {\n                let messages;\n                if (lang === 'es') {\n                    messages = [\n                        \"Â¡Hola! ðŸŒŸ\",\n                        \"Â¿Tienes preguntas sobre MYA, Olivea o DiVino?\",\n                        \"Â¡PregÃºntame, estoy aquÃ­ para ayudarte!\"\n                    ];\n                } else {\n                    messages = [\n                        \"Hey there! ðŸŒŸ\",\n                        \"Got questions about MYA, Olivea, or DiVino?\",\n                        \"Ask away, I'm here to help!\"\n                    ];\n                }\n                showInitialMessages(chatbox, messages, 'chatHistoryMobile');\n                localStorage.setItem('initialMessagesShownMobile', 'true');\n            } else {\n                chatbox.innerHTML = localStorage.getItem('chatHistoryMobile') || '';\n            }\n\n            const closeButton = document.getElementById('close-chatbot-swal');\n            closeButton.addEventListener('click', () => Swal.close());\n\n            const userInput = document.getElementById('user-input-swal');\n            userInput.addEventListener('keypress', (event) => {\n                if (event.key === 'Enter') {\n                    sendMessageSwal(event);\n                }\n            });\n\n            const sendButton = document.getElementById('send-button-swal');\n            sendButton.addEventListener('click', sendMessageSwal);\n            sendButton.addEventListener('touchstart', sendMessageSwal);\n\n            console.log(\"Event listeners attached for Swal modal\");\n        }\n    });\n}\n\nasync function sendMessageSwal(event) {\n    event.preventDefault();\n    console.log(\"sendMessageSwal triggered\");\n\n    const userInput = document.getElementById('user-input-swal');\n    const userInputValue = userInput.value;\n    if (userInputValue.trim() === \"\") return;\n\n    console.log(\"Sending message:\", userInputValue);\n\n    const chatbox = document.getElementById('chatbox-swal');\n    chatbox.innerHTML += `<div class=\"text-left chatbot-message\"><strong>You:</strong> ${userInputValue}</div>`;\n    userInput.value = '';\n\n    try {\n        const response = await fetch('/chatbot/chat', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ message: userInputValue })\n        });\n        const data = await response.json();\n        chatbox.innerHTML += `<div class=\"text-left chatbot-message\"><strong>Bot:</strong> ${data.response}</div>`;\n        chatbox.scrollTop = chatbox.scrollHeight;\n        localStorage.setItem('chatHistoryMobile', chatbox.innerHTML);\n    } catch (error) {\n        console.error('Error sending message:', error);\n    }\n}\n\nasync function sendMessage(event) {\n    event.preventDefault();\n    console.log(\"sendMessage triggered\");\n\n    const userInput = document.getElementById('user-input');\n    const userInputValue = userInput.value;\n    if (userInputValue.trim() === \"\") return;\n\n    console.log(\"Sending message:\", userInputValue);\n\n    const chatbox = document.getElementById('chatbox');\n    chatbox.innerHTML += `<div class=\"text-left chatbot-message\"><strong>You:</strong> ${userInputValue}</div>`;\n    userInput.value = '';\n\n    try {\n        const response = await fetch('/chatbot/chat', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ message: userInputValue })\n        });\n        const data = await response.json();\n        chatbox.innerHTML += `<div class=\"text-left chatbot-message\"><strong>Bot:</strong> ${data.response}</div>`;\n        chatbox.scrollTop = chatbox.scrollHeight;\n        localStorage.setItem('chatHistoryDesktop', chatbox.innerHTML);\n    } catch (error) {\n        console.error('Error sending message:', error);\n    }\n}\n\nfunction showInitialMessages(chatbox, messages, historyKey) {\n    chatbox.innerHTML = '';\n    let delay = 0;\n    messages.forEach((message, index) => {\n        setTimeout(() => {\n            chatbox.innerHTML += `<div class=\"text-left chatbot-message\"><strong>Bot:</strong> ${message}</div>`;\n            chatbox.scrollTop = chatbox.scrollHeight;\n            localStorage.setItem(historyKey, chatbox.innerHTML);\n        }, delay);\n        delay += 1000;\n    });\n}\n\nfunction handleResize() {\n    const chatbotContainer = document.getElementById('chatbot-container');\n    if (window.innerWidth <= 640) {\n        chatbotContainer.style.width = '100%';\n        chatbotContainer.style.height = 'auto';\n        chatbotContainer.style.bottom = '0';\n        chatbotContainer.style.right = '0';\n        chatbotContainer.style.left = '0';\n        chatbotContainer.style.maxHeight = '100%';\n        chatbotContainer.style.borderRadius = '0';\n    } else {\n        chatbotContainer.style.width = '20rem';\n        chatbotContainer.style.height = 'auto';\n        chatbotContainer.style.bottom = '1rem';\n        chatbotContainer.style.right = '1rem';\n        chatbotContainer.style.left = 'auto';\n        chatbotContainer.style.maxHeight = '24rem';\n        chatbotContainer.style.borderRadius = '0.5rem';\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    const closeButton = document.getElementById('close-chatbot');\n    if (closeButton) {\n        closeButton.addEventListener('click', closeChatbot);\n    }\n});\n","export function feature1() {\n    console.log('Feature 1 initialized');\n}\n","export function feature2() {\n    console.log('Feature 2 initialized');\n}\n"]}